
* {  box-sizing: border-box;
             padding: 0; 
             margin: 0;
             font-size: 16px;

             --navbar-height : 3.5em;
             --z-index-base: 1;

             --main-color-900: #212121;
             --main-color-800: #424242;
             --main-color-700: #616161;
             --main-color-600: #757575;
             --main-color-500: #9E9E9E;
             --main-color-400: #BDBDBD;
             --main-color-300: #E0E0E0;
             --main-color-200: #EEEEEE;
             --main-color-100: #F5F5F5;
             --main-color-50: #FAFAFA;

             --main-color: var(--main-color-900);
             --secondary-color: var(--main-color-500);

             --color-white: #fff;
             --color-black: #000;
             --color-grey: rgb(225, 225, 225);
             --box-shadow-color: #707070;

             --color-active: lime;
             --color-positive: #48903e;
             --color-positive-hover: #0a5a00;
             --color-negative: #8f3d3d;
             --color-negative-hover: #890000;
             --color-neutral-hover:#dada00;
             --color-neutral:#ffff00;
             --color-neutral--invisible:#ffff0000;

             --color-subtitle-bg: #000000bf;
             --color-subtitle-text: var(--color-white);
             


             --btn-color: var(--main-color-100);
             --btn-color-hover : var(--main-color-300);
             --card-color: var(--main-color-200);
             --card-text-color: var(--color-black);

             --overlay-color: var(--main-color-50);
             --overlay-text-color: var(--color-black);

             --navbar-color: var(--main-color-200);
             --navbar-text-color: var(--color-black);
             --background-color: var(--main-color-400);

            }

        .exercise-body { color:var(--color-white); background-color: var(--color-black); font-family:Roboto, Arial, Helvetica, sans-serif;}

.exercise-header {
    width: 100%;
    padding: 1em 2em;
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: var(--navbar-height);
    background-color: var(--navbar-color);
    color: var(--navbar-text-color);
    gap: 1em;

    h1 {
        font-weight: 600;
    }

    &__info {
        display: flex;
        align-items: center;
    }

    &__tools-list {
        display: flex;
        margin-left: auto;
        list-style: none;
        gap: 1em;
    }

        &__tools-list li {
            display: flex;
            border: currentColor;
        }
}
.task-tool {
    cursor: pointer;
    text-decoration: none;
    color: var(--navbar-text-color);
    padding: 2px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 2px;
    line-height: 24px;

    &.active {
        color: var(--color-active);
    }

    &:hover {
        background-color: var(--background-color);
    }

    &.hidden {
        display: none;
    }
}
.task {
    height: fit-content;
    max-height: 100%;
    display: none;
    margin: 0 auto;
    position: relative;
    top: 0;
    left: 0;

    &.active {
        display: flex;
        justify-content: center;

        .highlight-area::before {
            content: '';
            width: calc(100% + 2px);
            top: -3px;
            left: -3px;
            height: calc(100% + 2px);
            position: absolute;
            display: block;
            border-width: 2px;
            border-color: var(--color-neutral);
            border-style: solid;
            animation: alert-border 1.2s infinite;
            z-index: -2;
        }
    }

    img {
        aspect-ratio: 16/9;
        user-select: none;
        width: 100%;
        height: 100%;
        max-width: 100%;
        height: 100%;
        max-height: calc(100vh - var(--navbar-height));
    }

    &__list {
        list-style: none;
        display: flex;
        justify-content: center;
        left: 0;
        top: 0;
        z-index: calc(var(--z-index-base) + 5);
        position: absolute;
        width: 100%;
        height: 100%;
    }
}
.task-wrapper {
    background-color: var(--background-color);
    color: var(--color-white);
    border: 0em solid transparent;
    display: flex;
    justify-content: center;
    height: calc(100% - 3.5em);
    overflow: hidden;
    position: absolute;
    width: 100%;

    &__inner {
        aspect-ratio: 16/9;
        max-width: 100%;
        max-height: 100%;
        width: 100%;
        height: 100%;

        &.show-click-effect {
            position: relative;

            &::before {
                content: url('x');
                width: 18px;
                position: absolute;
                left: calc(50% - 9px);
                top: 50%;
                animation: cursorPointer 1s ease-out;
                opacity: 0;
                z-index: 999;
            }

            &::after {
                content: '';
                position: absolute;
                box-sizing: border-box;
                border-width: 0px;
                border-style: solid;
                border-color: #888;
                border-radius: 50%;
                top: 50%;
                left: 50%;
                animation: clickEffect .4s ease-out .8s;
                z-index: 998;
            }
        }

        &.show-keydown-effect {
            position: absolute;
            inset: 0;
            width: fit-content;
            height: fit-content;
            margin: auto;
        }
    }
}


        
        .task__list .task .interactions div {position: absolute; display: flex; padding: 0; margin: 0;}
        .task__list .task .interactions div .click, .task__list .task .interactions div .dblclick {cursor: pointer;}
        .task__list .task .interactions div .stringinput {cursor: text; font-size: 1.35vh;}
        .task__list .task .interactions div input { outline: none; border: none; width: 100%; height: 100%; padding: 4px; }
        .task__list .task .interactions div span {display: block; width: 100%; height: 100%;}
         
        .overlay__list {height: calc(100% - 3.5em); width: 100%;  left: 0; top: 3.5em; max-height: calc(100% - var(--navbar-height));}
        .overlay__item {display: none; z-index: 500; width: 100%; height: 100%; position: absolute; top: 0; left: 0; user-select: none; text-align: left; color: currentColor; }
        .overlay__item#audio-error-overlay {z-index:503}
        .overlay__item#settings-overlay {z-index:505}
        .overlay__item#confirm-restart-overlay {z-index:503}
        .overlay__item#confirm-restart-overlay .overlay__wrapper { justify-content: center; align-items: center; }
        .overlay__item#debug-overlay {z-index:1000}
        .overlay__item#results-overlay .overlay__wrapper {opacity: 1;}
        .overlay__item#intro-overlay {z-index:600;}
        .overlay__item#shortcircuit-overlay .overlay__wrapper {opacity: 1;}

        .overlay__item.active-overlay{animation: 200ms smooth-light ease forwards 200ms; display: flex;}
        .overlay__wrapper { display:flex; align-items: flex-start; flex-direction: column; width: 100%; overflow-y: auto; padding: 1em 2em; color: var(--overlay-text-color); background-color: var(--overlay-color); z-index: calc(var(--z-index-base) + 10); opacity: .925;}
        #intro-overlay .overlay__wrapper {opacity: 1;}
        .overlay__wrapper h2 {font-size: 1.35em;}
        .overlay__wrapper * {color: currentColor;}
        .overlay__wrapper.result__overlay {display: flex; gap: 1em;}
        .overlay__wrapper .result__list {    display: flex; flex-direction: row; gap: 1em; list-style: none;}

        .overlay__wrapper .result__list .result__item img {display: none;}
        .overlay__band {display: flex; width: 100%; flex-direction: row; justify-content: flex-start; margin: 1em 0; gap: 1em;}

        .settings__list {list-style: none; padding: 2rem 0;}        
        .settings__list li {margin-bottom: 2.5rem;}
        .settings__list li p {text-align: center; margin-bottom: .5em;}
        .settings__list li label {display: flex; gap: 1rem; cursor: pointer;}
        .settings__list .slider {position: relative; display: flex; width: 60px; height: 28px; border: 2px solid #2c2c2c; border-radius: 5px; background-color: #eaeaea;}
        .settings__list input {opacity: 0;}
        .settings__list input:checked + .slider-marker {left: calc(100% - 22px);}
        .settings__list .slider-marker {position: absolute; top: 2px; bottom: 2px; left: 2px; display: block; width: 20px; transition: left 400ms; border: 1px solid #2c2c2c; border-radius: 3px; background-color: #404040;}
        .settings__list .material-icons--crossed {position: relative;}
        .settings__list .material-icons--crossed svg {position: absolute; width: 23px; height: 23px; left: 1px;}

        .result__attempt-list {display: flex; flex-direction: column; list-style-type: none; gap:.5em;}
        .result__attempt-list li {}
        .result__attempt-list > li + li {border-top: 1px solid var(--color-grey); padding-top: 2em; margin-top: 2em;}
        .result__task-list {display: flex; flex-direction: column; list-style-type: none; gap:.5em; margin-top: .5em;}
        .result__task-list li {position: relative; background-color: var(--card-color); color: var(--card-text-color);}
        .result__task-details {min-width: 16rem;}
        .result__info {}
        .result__item {padding: 1em; background-color: var(--card-color); color: var(--card-text-color);}

        .result__list {display: flex; flex-wrap: wrap; align-items: flex-start; gap: 2rem; list-style: none;}
        .result__list h3 {width: 100%;}
        .result__stats {max-width: 40rem; gap: .5em;}
        .result__stats h2,h3 {margin-bottom: 1em;}
        .result__stats p {line-height: 1.5em; margin-bottom: 1em;}
        /*.result__stats div {display: inline-flex; align-items: flex-start; gap: .5em; margin-bottom: 1em; flex-direction:column;}*/
        
        .result__info .alert {color: var(--color-negative); font-weight: 700;}
        .result__info .info-item {display: flex; align-items: center; gap: 0.5em;}
        .result__quote {color: grey; font-style: italic; text-align: right; justify-content: flex-end;}
        .result__notice {display: flex; padding: 1em; flex-direction: row; gap: .5em;}
        .result__notice.alert {background-color:var(--color-negative); color: var(--color-white);}

        .result__item details {}
        .result__item details summary::-webkit-details-marker {display: none;}
        .result__item summary {display: flex; justify-content:space-between; align-items: center; width: 100%; cursor: pointer; font-size: 1.25rem; list-style: none; padding-bottom: .5em;}
        .result__item details summary span {transform: rotate(0deg); transition: transform 400ms; font-size: 24px;}
        .result__item details[open] summary span {transform: rotate(-180deg);}
        .result__item details .result__info {padding: 0 1.5vw 2vh 1.5vw;}
        .result__item details .result__info p {margin-bottom: .25em;}
        .result__item details .result__info a {display: flex; justify-content: flex-end; padding-top: 12px;}

        /* .overlay__wrapper .richtext ul li {margin-left: 1em; line-height: 3em;} */
        .overlay__wrapper .richtext {padding: 1em 2em; background-color: var(--card-color);}
        .overlay__wrapper .richtext ul li { margin-left: 1em;}

        .settings-check__list {display: flex; flex-direction: column; list-style-type: none; gap: 1em; flex-wrap: wrap; justify-content: flex-start;}
        .settings-check__item {padding: 1.5em 1.5em 0.75em 1.5em; background-color: var(--card-color); color: var(--card-text-color); display: flex; flex-direction: column; height: fit-content;   animation-duration: 1s; animation-name: animate-card-entry;}
        .settings-check__item .button {margin-left: auto; margin-top: 1.75em; overflow: hidden; white-space: nowrap;}
        .settings-check__item p:last-child {margin-bottom: 1em;}

        .button {height: 36px; line-height: 36px; min-width: 88px; font-size: 14px; padding: 0 16px; border-radius: 2px; text-transform: uppercase; display: inline-block; text-decoration: none;background-color: var(--btn-color); color: var(--card-text-color); vertical-align: middle; text-align: center; transition-property: color, background-color; transition-duration: 150ms; transition-timing-function: ease-in-out; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: .5em;}
        .button:hover {background-color: var(--btn-color-hover);}
        .button.button--large {font-size: 1.2em; height: 3em;min-width: 124px; line-height: 1.2; font-weight: 800; padding: 0 32px;}
        .button.button--positive {background-color: var(--color-positive); color: var(--color-white);}
        .button.button--positive:hover {background-color: var(--color-positive); color: var(--color-white);}
        .button.button--alert {background-color: var(--color-negative); color: var(--color-white);}
        .button#intro-begin {margin-left: auto; border: 2px solid; margin: 1em 0 0 0;}
        .button__wrapper { display: flex; gap: 1em; flex-direction: row; padding: 1em 0;}
        

        .subtitles__wrapper { display: flex; z-index: 600; position: absolute; bottom: 5%; left: 0; right: 0; margin: auto; width: fit-content; height: fit-content; color: var(--color-subtitle-text); padding: 1px; border-radius: 0px; font-size: 32px; background-color: var(--color-subtitle-bg); max-width: 60%; transition: bottom 400ms ease-in-out; text-align: center;}
        .subtitles__wrapper p { font-size: inherit;}
        .subtitles__wrapper.hidden {display: none;}
        .subtitles__btn {position: absolute; top: 0; text-decoration: none; color: var(--color-subtitle-text); background-color: var(--color-subtitle-bg); display: flex; width: calc(1.5em + 2px); height: calc(1.5em + 2px); line-height: 1em; text-align: center; justify-content: center; align-items: center; border-radius: 0px; box-shadow: 0 0 4px -1px var(--box-shadow-color); }
        .subtitles__btn#subtitles-hide{ right:-2.25em; top: 0em;}
        .subtitles__btn#subtitles-move{ right:-2.25em; top: 2em;}
        .subtitles__wrapper.moved {bottom: unset; bottom: 80%;}

        .feedback-wrapper {position: absolute; right: 2.5%; display: flex; bottom: 5%; gap: 8px; flex-direction: column; width: 40%; max-width: 35%;}
        feedback-component {background-color:var(--card-color); color: var(--card-text-color); padding: 2vh 1.5vw 2vh 1.5vw;  display: flex; flex-direction: row; justify-content: space-between; align-items: center; gap: 12px; animation-duration: 1s; animation-name: animate-card-entry; flex-wrap: wrap; }
        feedback-component.hidden {visibility: hidden;}
        feedback-component.neutral {border-top: 0 solid var(--color-neutral);}
        feedback-component.negative{border-top: 0 solid var(--color-negative); background-color: var(--color-negative); color: var(--color-white);}
        feedback-component.positive{border-top: 0 solid var(--color-positive); background-color: var(--color-positive); color: var(--color-white);}
        feedback-component .btn-wrapper:first-of-type {margin-left: auto;}
        feedback-component .btn-wrapper { display: flex; gap: 12px;}
        feedback-component .button {min-width: 52px;}

        // debug tang
        #exercise-debug-container {display: flex;}
        #debug-msg input{min-width:400px;}
        #debug-msg input+span{  margin-left: 1em;}
        
        
        .debug__task-timer {padding: 0 .5rem}
        .debug__task-count {padding: 0 .5rem}
        .debug-record-rect {cursor:crosshair;}
        .debug-sight .interactions * {background:red; border: 1px solid lime;}
        .debug-record-rect .interactions {z-index: calc(var(--z-index-base) + 1);}
        .debug-record-rect .task.active img {z-index: calc(var(--z-index-base) + 2); opacity: 0.75;}
        .debug-sight.debug-record-rect .interactions * {}
        .debug-sight.debug-record-rect .interactions  .mock-interaction {outline: none; background: lime; border:1px solid red;}
        .debug-record-rect .interactions  .mock-interaction {display: flex;}
        .interactions .mock-interaction {background:blue; border:1px solid hotpink; transition: all 400ms ease; display: none;}
        .debug-tool {padding: 0 .5rem; background-color: none; display: flex;}
      
        .blink-change {animation-duration: 500ms; animation-name: blink;}

        @keyframes animate-card-entry {
        0% {
            opacity: 0;
            transform: translateX(15%);
        }

        100% {
            opacity: 1;
            transform: translateX(0);
        }
        }
        @keyframes cursorPointer {
            0% {
                opacity: 1;
                left: calc(50% + 30px);
                top: calc(50% + 30px);
            }
            70% {
                opacity: 1;
                left: calc(50% - 9px);
                top: 50%;
            }
            100% {
                opacity: 1;
            }
        }
        @keyframes clickEffect {
            0% {
                opacity: 1;
                width: 16px;
                height: 16px;
                top: calc(-8px + 50%);
                left: calc(-8px + 50%);
                border-width: 8px;
            }
            100% {
                opacity: 0.2;
                width: 100px;
                height: 100px;
                top: calc(-50px + 50%);
                left: calc(-50px + 50%);
                border-width: 0px;
            }
        }
        @keyframes border-switch {
            0% {
                border-style: dotted;
            }
            50% {
                border-style: dashed;
            }
        }
        @keyframes alert-border {
            0% {
                border-color: var(--color-neutral);
            }
            100% {
                border-color: var(--color-neutral--invisible);
            }
        }
        @keyframes blink {
            from {
                background-color: lime;
            }
            to {
                background-color: none;
            }
        }


        @font-face {
          font-family: 'Material Icons';
          font-style: normal;
          font-weight: 400;
          src: url('/Assets/Fonts/MaterialIcons-Regular.ttf'); /* For IE6-8 */
          src: local('Material Icons'),
            local('MaterialIcons-Regular'),
            url('/Assets/Fonts/MaterialIcons-Regular.ttf') format('truetype');
        }
        .material-icons {
              font-family: 'Material Icons';
              font-weight: normal;
              font-style: normal;
              font-size: 24px;  /* Preferred icon size */
              display: inline-block;
              line-height: 1;
              text-transform: none;
              letter-spacing: normal;
              word-wrap: normal;
              white-space: nowrap;
              direction: ltr;

              /* Support for all WebKit browsers. */
              -webkit-font-smoothing: antialiased;
              /* Support for Safari and Chrome. */
              text-rendering: optimizeLegibility;

              /* Support for Firefox. */
              -moz-osx-font-smoothing: grayscale;

              /* Support for IE. */
              font-feature-settings: 'liga';
}